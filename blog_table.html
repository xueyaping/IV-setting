<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
<script>
function getLogDatas(){
   var loglen=$('#logLength').text()
   if(loglen>1){
     $('#logTable').empty();
     for(var h=0,str=1;h<j,h<loglen-1; h++,str++){
     var logdatas= JSON.parse(MainWindow.ReadSetLogP(str));
     dataArr[h]=logdatas;
     time=dataArr[h].time;state=dataArr[h].state;msg=dataArr[h].msg;
     //alert(time+state+msg)


     var $tr=$("<tr></tr>");
     var $td1="<td>"+time+"</td>";
     var $td2="<td>"+state+"</td>";
   // var $td3="<td>"+$("#phone").val()+"</td>";
     $tr.append($td1,$td2);
     $('#logTable').append($tr);
   }
   
 } else{
   $('#logTable').text('暂无数据')
 }
}


$(function(){
    getLogDatas(loglen)
}) 
</script>  
</head>

<body>
    <div class="container">
        <table id="logTable"></table>
        <div id="changpage" class="text-center"></div><!--cut page end-->
        
    </div>
        
</body>
<script>
    var obj,j;
    var page=0;
    var nowPage=0;//当前页
    var listNum=3;//每页显示<ul>数
    var PagesLen;//总页数
    var PageNum=4;//分页链接接数(5个)
    onload=function(){
        obj=document.getElementById("logTable").getElementsByTagName("tr");
        j=obj.length
        PagesLen=Math.ceil(j/listNum);
        upPage(0)
    }
    function upPage(p){
        nowPage=p
    //内容变换
        for (var i=0;i<j;i++){
            obj[i].style.display="none"
        }
        for (var i=p*listNum;i<(p+1)*listNum;i++){
            if(obj[i])obj[i].style.display="block"
        }
    //分页链接变换
        strS='<a href="#" onclick="upPage(0)"><</a>  '
        var PageNum_2=PageNum%2==0?Math.ceil(PageNum/2)+1:Math.ceil(PageNum/2)
        var PageNum_3=PageNum%2==0?Math.ceil(PageNum/2):Math.ceil(PageNum/2)+1
        var strC="",startPage,endPage;
        if (PageNum>=PagesLen) {startPage=0;endPage=PagesLen-1}
        else if (nowPage<PageNum_2){startPage=0;endPage=PagesLen-1>PageNum?PageNum:PagesLen-1}//首页
        else {startPage=nowPage+PageNum_3>=PagesLen?PagesLen-PageNum-1: nowPage-PageNum_2+1;var t=startPage+PageNum;endPage=t>PagesLen?PagesLen-1:t}
        for (var i=startPage;i<=endPage;i++){
            if (i==nowPage)strC+='<a href="#" style="color:red;padding: 2px;font-weight:700;" onclick="upPage('+i+')">'+(i+1)+'</a> '
            else strC+='<a href="###" style="padding: 2px;"onclick="upPage('+i+')">'+(i+1)+'</a> '
        }
        strE=' <a href="###" onclick="upPage('+(PagesLen-1)+')">></a>  '
        strE2=nowPage+1+"/"+PagesLen+"页"+"  共"+j+"条"
        document.getElementById("changpage").innerHTML=strS+strC+strE+strE2
    }
</script>
</html>